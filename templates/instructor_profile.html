<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructor Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f8ff; /* Light Blue */
            font-family: 'Arial', sans-serif;
        }
        
        .profile-container {
            margin-top: 50px;
            max-width: 600px;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            border: 1px solid #007bff;
        }
        
        h2 {
            color: #007bff;
            margin-bottom: 20px;
        }
        
        th {
            background-color: #007bff;
            color: white;
            text-align: left;
            width: 40%;
        }
        
        td {
            background-color: #f8f9fa;
        }
        
        input {
            border-radius: 5px;
        }
        
    </style>
</head>
<body class="bg-light">

    <div class="container mt-5">
        <h2 class="text-primary">Instructor Profile</h2>
        <table class="table table-bordered">
            <tr>
                <th>Username</th>
                <td>{{ user.username }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            <tr>
                <th>Courses</th>
                <td><input type="text" name="courses" id="courses" value="{{ learner_profile.courses|default_if_none:'' }}"></td>
            </tr>
            <tr>
                <th>Age</th>
                <td><input type="number" name="age" id="age" value="{{ learner_profile.age|default_if_none:'' }}"></td>
            </tr>
            <tr>
                <th>State</th>
                <td><input type="text" name="state" id="state" value="{{ learner_profile.state|default_if_none:'' }}"></td>
            </tr>
            <tr>
                <th>City</th>
                <td><input type="text" name="city" id="city" value="{{ learner_profile.city|default_if_none:'' }}"></td>
            </tr>
        </table>
        <button id="editButton" class="btn btn-primary">Edit</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let editButton = document.getElementById("editButton");

            if (editButton) { 
                editButton.addEventListener("click", function () {
                    let courses = document.getElementById("courses").value;
                    let age = document.getElementById("age").value;
                    let state = document.getElementById("state").value;
                    let city = document.getElementById("city").value;

                    fetch("{% url 'update_instructor_profile' %}", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "X-CSRFToken": "{{ csrf_token }}"
                        },
                        body: JSON.stringify({
                            courses: courses,
                            age: age,
                            state: state,
                            city: city
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert("Profile updated successfully!");
                        } else {
                            alert("Error updating profile.");
                        }
                    })
                    .catch(error => console.error("Error:", error));
                });
            } else {
                console.error("Edit button not found!");
            }
        });
    </script>

</body>
</html>
